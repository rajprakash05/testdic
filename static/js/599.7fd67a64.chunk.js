/*! For license information please see 599.7fd67a64.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkdiz=self.webpackChunkdiz||[]).push([[599],{3599:function(e,t,n){n.r(t),n.d(t,{default:function(){return V}});var a=n(1413),r=n(4165),i=n(5861),s=n(2982),o=n(885),c=n(2791),l=n(6871),u=n(390);function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},d.apply(this,arguments)}function f(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}var p=["onClick","reloadDocument","replace","state","target","to"],m=["aria-current","caseSensitive","className","end","style","to","children"];var v=(0,c.forwardRef)((function(e,t){var n=e.onClick,a=e.reloadDocument,r=e.replace,i=void 0!==r&&r,s=e.state,o=e.target,m=e.to,v=f(e,p),x=(0,l.oQ)(m),h=function(e,t){var n=void 0===t?{}:t,a=n.target,r=n.replace,i=n.state,s=(0,l.s0)(),o=(0,l.TH)(),d=(0,l.WU)(e);return(0,c.useCallback)((function(t){if(0===t.button&&(!a||"_self"===a)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!r||(0,u.Ep)(o)===(0,u.Ep)(d);s(e,{replace:n,state:i})}}),[o,s,d,r,i,a,e])}(m,{replace:i,state:s,target:o});return(0,c.createElement)("a",d({},v,{href:x,onClick:function(e){n&&n(e),e.defaultPrevented||a||h(e)},ref:t,target:o}))}));var x=(0,c.forwardRef)((function(e,t){var n=e["aria-current"],a=void 0===n?"page":n,r=e.caseSensitive,i=void 0!==r&&r,s=e.className,o=void 0===s?"":s,u=e.end,p=void 0!==u&&u,x=e.style,h=e.to,g=e.children,y=f(e,m),Z=(0,l.TH)(),b=(0,l.WU)(h),j=Z.pathname,w=b.pathname;i||(j=j.toLowerCase(),w=w.toLowerCase());var N,k=j===w||!p&&j.startsWith(w)&&"/"===j.charAt(w.length),I=k?a:void 0;N="function"===typeof o?o({isActive:k}):[o,k?"active":null].filter(Boolean).join(" ");var C="function"===typeof x?x({isActive:k}):x;return(0,c.createElement)(v,d({},y,{"aria-current":I,className:N,ref:t,style:C,to:h}),"function"===typeof g?g({isActive:k}):g)}));var h=n(2797),g=n(4162),y=n(3811),Z=n(5814),b=n(4565),j=n(8008);var w=n.p+"static/media/leaf.1ca0cee639847f480bdcdcced995f151.svg";var N=n.p+"static/media/poll.0ffe89679bc6882aff7446f008f65401.svg";var k=n.p+"static/media/account-multiple.f352b7e9caacce7a4bffc23bea6a6277.svg";var I=n.p+"static/media/credit-card-outline.9784b32b79a02798b3f0e64cb418464c.svg";var C=n.p+"static/media/setting.59681de3134eb34fe3385254dcdbd372.svg";var S=n.p+"static/media/power-plug.c62f9b995584ac41c4350cc1397f9a34.svg",P=n(6425),O=n(1872),L=n(5452),M=n(4020),A=n(9434),R=n(3585),K=n(4175),D=n(8901),E=n(5172);var H=n.p+"static/media/profileDefault.66db2b79ab78aea739e44c1f6615f6fb.svg";var U=n.p+"static/media/profileDef.fe39d64a888bb5104572fdec61275884.svg",z=n(1411),T=n(6747),W=n(4169),_=n(184);function B(){var e=(0,A.I0)(),t=(0,A.v9)((function(e){return e.auth})).user,n=(0,l.s0)(),a=(0,c.useState)(!1),s=(0,o.Z)(a,2),u=s[0],d=s[1],f=Boolean(u),p=function(){d(null)},m=(0,h.Z)("(max-width:1000px)"),v=function(){var n=(0,i.Z)((0,r.Z)().mark((function n(){var a,i,s;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e((0,z.K4)(!0)),p(),a={params:{enterpriseUserId:t.enterpriseUserId}},n.next=5,K.Z.post("/auth/logout",{},a);case 5:(i=n.sent).ok?(e((0,z.K4)(!1)),"success"===(s=i.data).status?(localStorage.removeItem("diz"),e((0,R.kS)())):(0,D.k)(s.message,"error")):e((0,z.K4)(!1));case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,_.jsx)("div",{className:"headerContainer",style:{background:T.O.header,marginLeft:m?"56px":"",height:"56px"},children:(0,_.jsxs)(g.Z,{sx:{height:"100%"},direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,_.jsxs)("div",{className:"flex-center",children:[(0,_.jsx)("img",{style:{width:"36.76px",height:"19.06px",marginLeft:m?"16px":"24px"},src:P.Z,alt:"Do It Zero Logo"}),(0,_.jsxs)(b.Z,{className:"fs-10 ff-Roboto fw-regular",style:{marginLeft:"11.24px",display:"flex",flexDirection:"column",lineHeight:"10px"},children:[(0,_.jsx)("span",{children:"Enterprise"}),(0,_.jsx)("span",{children:"Platform"})," "]})]}),(0,_.jsx)("div",{className:"profileSection",style:{minWidth:m?"100px":"232px"},children:(0,_.jsx)(g.Z,{sx:{height:"100%"},direction:"row",alignItems:"center",children:(0,_.jsx)("div",{className:"profiledetail flex-aligncenter",style:{flex:"1",width:"calc(100% - 56px)"},children:(0,_.jsxs)(g.Z,{direction:"row",flex:"1",justifyContent:"space-between",style:{width:"100%"},children:[(0,_.jsxs)("div",{className:"flex-aligncenter",style:{width:"calc(100% - 50px)"},children:[(0,_.jsx)("img",{src:null!==t&&void 0!==t&&t.enterpriseLogo?W.Z.s3Path+(null===t||void 0===t?void 0:t.enterpriseLogo):H,alt:"ProfileImage",style:{marginLeft:"8px"}}),(0,_.jsx)(O.Z,{style:{border:"1px solid #496073",height:m?"32.5px":"24px",margin:m?"3.25px 9px 3.25px 7px":"8px 12px 8px 12px"},orientation:"vertical",flexItem:!0}),(0,_.jsx)("img",{src:null!==t&&void 0!==t&&t.profileImage?W.Z.s3Path+(null===t||void 0===t?void 0:t.profileImage):U,alt:"ProfileImage",style:{marginRight:"5px",objectFit:"cover"}}),!m&&(0,_.jsx)(g.Z,{style:{cursor:"default",width:"79px"},children:(0,_.jsxs)(b.Z,{className:"ff-Roboto fs-12 fw-medium ellipseStyle",style:{color:T.O.deactive,width:"99%"},children:[" ",(null===t||void 0===t?void 0:t.name)||"-"," "]})})]}),(0,_.jsx)(y.Z,{id:"resource-button",onClick:function(e){d(e.currentTarget)},"aria-controls":f?"resource-menu":void 0,"aria-haspopup":"true","aria-expanded":f?"true":void 0,style:{marginRight:"10px"},children:(0,_.jsx)(E.Z,{className:"svgColor"})}),(0,_.jsxs)(L.Z,{className:"appbar",id:"resource-menu",anchorEl:u,open:f,MenuListProps:{"aria-labelledby":"resource-button"},onClose:p,PopperProps:{placement:"bottom-end"},PaperProps:{style:{width:"217px",marginTop:"5px"}},children:[(0,_.jsxs)(M.Z,{className:"ff-Roboto fs-12 fs-medium",style:{color:T.O.blackMain,minHeight:"32px"},onClose:p,onClick:function(){n("/settings"),e((0,z.i3)(0)),d(null)},children:[" ","My Profile"," "]}),(0,_.jsxs)(M.Z,{className:"ff-Roboto fs-12 fs-medium",style:{color:T.O.blackMain,minHeight:"32px"},onClose:p,children:[" ","Support & Help"," "]}),(0,_.jsxs)(M.Z,{className:"ff-Roboto fs-12 fs-medium",style:{color:T.O.blackMain,minHeight:"32px"},onClose:p,onClick:v,children:[" ","Logout"," "]})]})]})})})})]})})}var F=n(83),J=n(2015),Q=[{name:"Eco Initiatives",flag:!1,icon:w,route:"ecoInitiatives",moduleName:"eco_initiatives"},{name:"Analytics",flag:!1,icon:N,route:"analytics",moduleName:"reporting_analytics"},{name:"Payments",flag:!1,icon:I,route:"payments",moduleName:"payments"},{name:"User Management",flag:!1,icon:k,route:"userManagement",moduleName:"user_management"},{name:"Integrations",flag:!1,icon:S,route:"integrations",moduleName:"integrations"},{name:"Settings",flag:!0,icon:C,route:"settings",moduleName:"settings"}];function V(){var e=(0,A.v9)((function(e){return e.auth})).user,t=(0,c.useState)(Q),n=(0,o.Z)(t,2),u=n[0],d=n[1],f=(0,l.s0)();(0,c.useEffect)((function(){var t=[].concat(Q),n=null===e||void 0===e?void 0:e.permission;t.map((function(e){var t=null===n||void 0===n?void 0:n.find((function(t){return t.moduleName===e.moduleName}));t&&("0"===t.viewAccess&&"0"===t.editAccess&&"0"===t.deleteAccess&&"0"===t.activateAccess?e.moduleName===t.moduleName&&(e.flag=!1):e.flag=!0)})),d(t)}),[e]);var p=(0,A.I0)();(0,c.useEffect)((function(){var e=JSON.parse(JSON.stringify(u));p((0,R.sy)((0,s.Z)(e)))}),[u]);var m=(0,h.Z)("(max-width:1000px)"),v=(0,c.useRef)();(0,F.Z)(v,(function(){return m&&I(!1)}));var w=(0,c.useState)(!1),N=(0,o.Z)(w,2),k=N[0],I=N[1],C=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.Z.get("/city");case 2:(t=e.sent).ok&&"success"===(n=t.data).status&&(a=null===n||void 0===n?void 0:n.data,p((0,z.Ix)(a)));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.Z.get("/country");case 2:(t=e.sent).ok&&"success"===(n=t.data).status&&p((0,z.sK)(null===n||void 0===n?void 0:n.data));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(){var n,a,i,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={params:{enterpriseId:e.enterpriseId}},t.next=3,K.Z.get("/enterprise/".concat(e.enterpriseId,"/roles"),n);case 3:(a=t.sent).ok&&"success"===(i=a.data).status&&(s=null===i||void 0===i?void 0:i.data,p((0,z.Lk)(s)));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(){var n,i,s,o,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p((0,z.K4)(!0)),n={params:{enterpriseId:e.enterpriseId,enterpriseUserId:e.enterpriseUserId}},i={},t.next=5,K.Z.get("/user/".concat(e.enterpriseId,"/").concat(e.enterpriseUserId),n);case 5:(s=t.sent).ok&&"success"===(o=s.data).status?(i=(0,a.Z)({},o.data),p((0,R.x4)((0,a.Z)((0,a.Z)({},e),i))),c=J.x8.find((function(e){var t;return(null===e||void 0===e?void 0:e.moduleName)===(null===(t=i)||void 0===t?void 0:t.moduleName)})),f(c?"/".concat(c.name):"/ecoInitiatives"),p((0,z.K4)(!1))):p((0,z.K4)(!1));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,c.useEffect)((function(){C(),S(),P(),O()}),[]);return(0,_.jsx)("div",{className:"dashboardContainer",children:(0,_.jsxs)(g.Z,{direction:"row",children:[(0,_.jsx)("div",{ref:v,onClick:function(e){return e.stopPropagation()},className:k?"expandsideNav":"shrinksideNav",style:{background:T.O.primary,width:k?"256px":"56px",position:m?"fixed":"relative",top:"0",left:"0"},children:(0,_.jsxs)(g.Z,{children:[(0,_.jsx)("div",{className:"hamburgerwrapper",style:{width:"56px",height:"56px",background:T.O.primary},children:(0,_.jsx)(y.Z,{onClick:function(e){e.stopPropagation(),I(!k)},style:{width:"40px",height:"40px"},children:(0,_.jsx)(j.Z,{className:"svgIconsMenu"})})}),(0,_.jsx)(g.Z,{sx:{height:m?"calc(100vh - 56px)":"calc(100vh - 72px)",position:"relative",display:m&&!k?"none":"initial"},children:null===u||void 0===u?void 0:u.map((function(e,t){return e.flag?(0,_.jsxs)(x,{onClick:function(){return m&&I(!1)},className:function(t){return(t.isActive?"activeMenu":"inActiveMenu")+" flex-aligncenter linkStyle "+("Settings"===e.name?"settingStyle":"")},style:{textDecoration:"none"},to:"/".concat(e.route),children:[(0,_.jsx)(Z.Z,{disableInteractive:!0,componentsProps:{tooltip:{sx:{fontSize:"12px",fontFamily:"Roboto",fontWeight:"400",bgcolor:T.O.primaryDark,"& .MuiTooltip-arrow":{color:T.O.primaryDark,width:"0.5em !important",height:"0.8em !important",marginLeft:"-0.5em !important"}}}},title:!k&&e.name,placement:"right",arrow:!0,children:(0,_.jsx)("div",{className:"menuStyle",children:(0,_.jsx)("img",{src:e.icon,alt:e.name})})},t),k?(0,_.jsxs)(b.Z,{className:"menuName fs-12 fw-medium ff-Roboto expandedAnimation",children:[" ",e.name," "]}):""]},t):""}))})]})}),(0,_.jsxs)("div",{style:{flex:"1",width:"calc(100%  - 256px)"},children:[(0,_.jsx)(B,{}),(0,_.jsx)(l.j3,{})]})]})})}},8008:function(e,t,n){var a=n(4836);t.Z=void 0;var r=a(n(5649)),i=n(184),s=(0,r.default)((0,i.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");t.Z=s}}]);
//# sourceMappingURL=599.7fd67a64.chunk.js.map