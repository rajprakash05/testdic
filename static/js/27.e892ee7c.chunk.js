"use strict";(self.webpackChunkdiz=self.webpackChunkdiz||[]).push([[27],{5027:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var a=n(1413),i=n(4165),s=n(5861),r=n(885),o=n(2791),c=n(6871),l=n(3504),d=n(2797),u=n(4162),p=n(3811),f=n(5814),m=n(4565),x=n(8008);var v=n.p+"static/media/leaf.1ca0cee639847f480bdcdcced995f151.svg";var h=n.p+"static/media/poll.0ffe89679bc6882aff7446f008f65401.svg";var g=n.p+"static/media/account-multiple.f352b7e9caacce7a4bffc23bea6a6277.svg";var y=n.p+"static/media/credit-card-outline.9784b32b79a02798b3f0e64cb418464c.svg";var b=n.p+"static/media/setting.59681de3134eb34fe3385254dcdbd372.svg";var Z=n.p+"static/media/power-plug.c62f9b995584ac41c4350cc1397f9a34.svg";var j=n.p+"static/media/dizlogoOrigin.67111b7b45a26afa8fb0f0e682e7dcfc.svg",w=n(5452),N=n(4020),k=n(9434),I=n(3585),C=n(4175),R=n(8901),S=n(5172);var M=n.p+"static/media/profileDefault.66db2b79ab78aea739e44c1f6615f6fb.svg",O=n(1411),P=n(6747),L=n(184);function z(){var e=(0,k.I0)(),t=(0,k.v9)((function(e){return e.auth})).user,n=(0,c.s0)(),a=(0,o.useState)(!1),l=(0,r.Z)(a,2),f=l[0],x=l[1],v=Boolean(f),h=function(){x(null)},g=(0,d.Z)("(max-width:1000px)"),y=function(){var n=(0,s.Z)((0,i.Z)().mark((function n(){var a,s,r;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e((0,O.K4)(!0)),h(),a={params:{enterpriseUserId:t.enterpriseUserId}},n.next=5,C.R.post("/auth/logout",{},a);case 5:(s=n.sent).ok?(e((0,O.K4)(!1)),"success"===(r=s.data).status?(localStorage.removeItem("diz"),e((0,I.kS)())):(0,R.k)(r.message,2e3,"error")):e((0,O.K4)(!1));case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,L.jsx)("div",{className:"headerContainer",style:{background:P.O.header,marginLeft:g?"56px":"",height:"56px"},children:(0,L.jsxs)(u.Z,{sx:{height:"100%"},direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,L.jsxs)("div",{className:"flex-center",children:[(0,L.jsx)("img",{style:{width:"36.76px",height:"19.06px",marginLeft:g?"16px":"24px"},src:j,alt:"Do It Zero Logo"}),(0,L.jsxs)(m.Z,{className:"fs-10 ff-Roboto fw-regular",style:{marginLeft:"11.24px",display:"flex",flexDirection:"column",lineHeight:"10px"},children:[(0,L.jsx)("span",{children:"Enterprise"}),(0,L.jsx)("span",{children:"Platform"})," "]})]}),(0,L.jsx)("div",{className:"profileSection",style:{minWidth:g?"100px":"232px"},children:(0,L.jsx)(u.Z,{sx:{height:"100%"},direction:"row",alignItems:"center",children:(0,L.jsx)("div",{className:"profiledetail flex-aligncenter",style:{flex:"1",width:"calc(100% - 56px)"},children:(0,L.jsxs)(u.Z,{direction:"row",flex:"1",justifyContent:"space-between",style:{width:"100%"},children:[(0,L.jsxs)("div",{className:"flex-aligncenter",style:{width:"calc(100% - 50px)"},children:[(0,L.jsx)("img",{src:M,alt:"ProfileImage",style:{marginLeft:"8px"}}),!g&&(0,L.jsxs)(u.Z,{style:{cursor:"default",width:"119px"},children:[(0,L.jsxs)(m.Z,{className:"ff-Roboto fs-12 fw-medium ellipseStyle",style:{color:P.O.deactive,width:"99%"},children:[" ",(null===t||void 0===t?void 0:t.name)||"-"," "]}),(0,L.jsxs)(m.Z,{className:"ff-Roboto fw-regular fs-12 ellipseStyle",style:{color:P.O.deactive,width:"99%"},children:[" ",null===t||void 0===t?void 0:t.emailId," "]})]})]}),(0,L.jsx)(p.Z,{id:"resource-button",onClick:function(e){x(e.currentTarget)},"aria-controls":v?"resource-menu":void 0,"aria-haspopup":"true","aria-expanded":v?"true":void 0,style:{marginRight:"10px"},children:(0,L.jsx)(S.Z,{className:"svgColor"})}),(0,L.jsxs)(w.Z,{className:"appbar",id:"resource-menu",anchorEl:f,open:v,MenuListProps:{"aria-labelledby":"resource-button"},onClose:h,PopperProps:{placement:"bottom-end"},PaperProps:{style:{width:"217px",marginTop:"5px"}},children:[(0,L.jsx)(N.Z,{className:"ff-Roboto fs-12 fs-medium",style:{color:P.O.blackMain,minHeight:"32px"},onClose:h,onClick:function(){n("/settings"),e((0,O.i3)(0)),x(null)},children:" My Profile "}),(0,L.jsx)(N.Z,{className:"ff-Roboto fs-12 fs-medium",style:{color:P.O.blackMain,minHeight:"32px"},onClose:h,children:" Support & Help "}),(0,L.jsx)(N.Z,{className:"ff-Roboto fs-12 fs-medium",style:{color:P.O.blackMain,minHeight:"32px"},onClose:h,onClick:y,children:" Logout "})]})]})})})})]})})}var A=n(83),H=n(2015),K=[{name:"Eco Initiatives",flag:!0,icon:v,route:"ecoInitiatives",moduleName:"eco_initiatives"},{name:"Analytics",flag:!0,icon:h,route:"analytics",moduleName:"reporting_analytics"},{name:"Payments",flag:!0,icon:y,route:"payments",moduleName:"payments"},{name:"User Management",flag:!0,icon:g,route:"userManagement",moduleName:"user_management"},{name:"Integrations",flag:!0,icon:Z,route:"integrations",moduleName:"integrations"},{name:"Settings",flag:!0,icon:b,route:"settings",moduleName:"settings"}];function D(){var e=(0,k.v9)((function(e){return e.auth})).user,t=(0,o.useState)(K),n=(0,r.Z)(t,2),v=n[0],h=n[1],g=(0,c.s0)();(0,o.useEffect)((function(){console.log("yes");var t=[].concat(K),n=null===e||void 0===e?void 0:e.permission;console.log({permissions:n}),t.map((function(e){var t=null===n||void 0===n?void 0:n.find((function(t){return t.moduleName===e.moduleName}));t&&("0"===t.viewAccess&&"0"===t.editAccess&&"0"===t.deleteAccess&&"0"===t.activateAccess?e.moduleName===t.moduleName&&(e.flag=!1):e.flag=!0)})),console.log({arr:t}),h(t)}),[e]);var y=(0,k.I0)(),b=(0,d.Z)("(max-width:1000px)"),Z=(0,o.useRef)();(0,A.Z)(Z,(function(){return b&&R(!1)}));var j=(0,o.useState)(!1),w=(0,r.Z)(j,2),N=w[0],R=w[1],S=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var t,n,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.R.get("/city");case 2:(t=e.sent).ok&&"success"===(n=t.data).status&&(a=null===n||void 0===n?void 0:n.data,y((0,O.Ix)(a)));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.R.get("/country");case 2:(t=e.sent).ok&&"success"===(n=t.data).status&&y((0,O.sK)(null===n||void 0===n?void 0:n.data));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var t=(0,s.Z)((0,i.Z)().mark((function t(){var n,a,s,r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={params:{enterpriseId:e.enterpriseId}},t.next=3,C.R.get("/enterprise/".concat(e.enterpriseId,"/roles"),n);case 3:(a=t.sent).ok&&"success"===(s=a.data).status&&(r=null===s||void 0===s?void 0:s.data,y((0,O.Lk)(r)));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),U=function(){var t=(0,s.Z)((0,i.Z)().mark((function t(){var n,s,r,o,c;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y((0,O.K4)(!0)),n={params:{enterpriseId:e.enterpriseId,enterpriseUserId:e.enterpriseUserId}},s={},t.next=5,C.R.get("/user/".concat(e.enterpriseId,"/").concat(e.enterpriseUserId),n);case 5:(r=t.sent).ok&&"success"===(o=r.data).status?(s=(0,a.Z)({},o.data),y((0,I.x4)((0,a.Z)((0,a.Z)({},e),s))),c=H.x8.find((function(e){var t;return(null===e||void 0===e?void 0:e.moduleName)===(null===(t=s)||void 0===t?void 0:t.moduleName)})),console.log({find:c}),g(c?"/".concat(c.name):"/ecoInitiatives"),y((0,O.K4)(!1))):y((0,O.K4)(!1));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,o.useEffect)((function(){S(),M(),D(),U()}),[]);return(0,L.jsx)("div",{className:"dashboardContainer",children:(0,L.jsxs)(u.Z,{direction:"row",children:[(0,L.jsx)("div",{ref:Z,onClick:function(e){return e.stopPropagation()},className:N?"expandsideNav":"shrinksideNav",style:{background:P.O.primary,width:N?"256px":"56px",position:b?"fixed":"relative",top:"0",left:"0"},children:(0,L.jsxs)(u.Z,{children:[(0,L.jsx)("div",{className:"hamburgerwrapper",style:{width:"56px",height:"56px",background:P.O.primary},children:(0,L.jsx)(p.Z,{onClick:function(e){e.stopPropagation(),R(!N)},style:{width:"40px",height:"40px"},children:(0,L.jsx)(x.Z,{className:"svgIconsMenu"})})}),(0,L.jsx)(u.Z,{sx:{height:b?"calc(100vh - 56px)":"calc(100vh - 72px)",position:"relative",display:b&&!N?"none":"initial"},children:null===v||void 0===v?void 0:v.map((function(e,t){return e.flag?(0,L.jsxs)(l.OL,{onClick:function(){return b&&R(!1)},className:function(t){return(t.isActive?"activeMenu":"inActiveMenu")+" flex-aligncenter linkStyle "+("Settings"===e.name?"settingStyle":"")},style:{textDecoration:"none"},to:"/".concat(e.route),children:[(0,L.jsx)(f.Z,{disableInteractive:!0,componentsProps:{tooltip:{sx:{fontSize:"12px",fontFamily:"Roboto",fontWeight:"400",bgcolor:P.O.primaryDark,"& .MuiTooltip-arrow":{color:P.O.primaryDark,width:"0.5em !important",height:"0.8em !important",marginLeft:"-0.5em !important"}}}},title:!N&&e.name,placement:"right",arrow:!0,children:(0,L.jsx)("div",{className:"menuStyle",children:(0,L.jsx)("img",{src:e.icon,alt:e.name})})},t),N?(0,L.jsxs)(m.Z,{className:"menuName fs-12 fw-medium ff-Roboto expandedAnimation",children:[" ",e.name," "]}):""]},t):""}))})]})}),(0,L.jsxs)("div",{style:{flex:"1",width:"calc(100%  - 256px)"},children:[(0,L.jsx)(z,{}),(0,L.jsx)(c.j3,{})]})]})})}},8008:function(e,t,n){var a=n(4836);t.Z=void 0;var i=a(n(5649)),s=n(184),r=(0,i.default)((0,s.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");t.Z=r}}]);
//# sourceMappingURL=27.e892ee7c.chunk.js.map