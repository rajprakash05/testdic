"use strict";(self.webpackChunkdiz=self.webpackChunkdiz||[]).push([[650],{60650:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var a=n(1413),i=n(74165),r=n(15861),s=n(42982),o=n(70885),c=n(72791),l=n(16871),u=n(43504),d=n(52797),p=n(94162),f=n(13811),m=n(75814),x=n(4565),v=n(98008);var h=n.p+"static/media/leaf.1ca0cee639847f480bdcdcced995f151.svg";var g=n.p+"static/media/poll.0ffe89679bc6882aff7446f008f65401.svg";var Z=n.p+"static/media/account-multiple.f352b7e9caacce7a4bffc23bea6a6277.svg";var y=n.p+"static/media/credit-card-outline.9784b32b79a02798b3f0e64cb418464c.svg";var b=n.p+"static/media/setting.59681de3134eb34fe3385254dcdbd372.svg";var j=n.p+"static/media/power-plug.c62f9b995584ac41c4350cc1397f9a34.svg",w=n(76425),N=n(81872),k=n(95452),I=n(24020),C=n(59434),S=n(43585),P=n(34175),M=n(58901),L=n(85172);var O=n.p+"static/media/profileDefault.66db2b79ab78aea739e44c1f6615f6fb.svg";var R=n.p+"static/media/profileDef.fe39d64a888bb5104572fdec61275884.svg",A=n(91411),H=n(6747),z=n(74169),D=n(80184);function K(){var e=(0,C.I0)(),t=(0,C.v9)((function(e){return e.auth})).user,n=(0,l.s0)(),a=(0,c.useState)(!1),s=(0,o.Z)(a,2),u=s[0],m=s[1],v=Boolean(u),h=function(){m(null)},g=(0,d.Z)("(max-width:1000px)"),Z=function(){var n=(0,r.Z)((0,i.Z)().mark((function n(){var a,r,s;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e((0,A.K4)(!0)),h(),a={params:{enterpriseUserId:t.enterpriseUserId}},n.next=5,P.Z.post("/auth/logout",{},a);case 5:(r=n.sent).ok?(e((0,A.K4)(!1)),"success"===(s=r.data).status?(localStorage.removeItem("diz"),e((0,S.kS)())):(0,M.k)(s.message,"error")):e((0,A.K4)(!1));case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,D.jsx)("div",{className:"headerContainer",style:{background:H.O.header,marginLeft:g?"56px":"",height:"56px"},children:(0,D.jsxs)(p.Z,{sx:{height:"100%"},direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,D.jsxs)("div",{className:"flex-center",children:[(0,D.jsx)("img",{style:{width:"36.76px",height:"19.06px",marginLeft:g?"16px":"24px"},src:w.Z,alt:"Do It Zero Logo"}),(0,D.jsxs)(x.Z,{className:"fs-10 ff-Roboto fw-regular",style:{marginLeft:"11.24px",display:"flex",flexDirection:"column",lineHeight:"10px"},children:[(0,D.jsx)("span",{children:"Enterprise"}),(0,D.jsx)("span",{children:"Platform"})," "]})]}),(0,D.jsx)("div",{className:"profileSection",style:{minWidth:g?"100px":"232px"},children:(0,D.jsx)(p.Z,{sx:{height:"100%"},direction:"row",alignItems:"center",children:(0,D.jsx)("div",{className:"profiledetail flex-aligncenter",style:{flex:"1",width:"calc(100% - 56px)"},children:(0,D.jsxs)(p.Z,{direction:"row",flex:"1",justifyContent:"space-between",style:{width:"100%"},children:[(0,D.jsxs)("div",{className:"flex-aligncenter",style:{width:"calc(100% - 50px)"},children:[(0,D.jsx)("img",{src:null!==t&&void 0!==t&&t.enterpriseLogo?z.Z.s3Path+(null===t||void 0===t?void 0:t.enterpriseLogo):O,alt:"ProfileImage",style:{marginLeft:"8px"}}),(0,D.jsx)(N.Z,{style:{border:"1px solid #496073",height:g?"32.5px":"24px",margin:g?"3.25px 9px 3.25px 7px":"8px 12px 8px 12px"},orientation:"vertical",flexItem:!0}),(0,D.jsx)("img",{src:null!==t&&void 0!==t&&t.profileImage?z.Z.s3Path+(null===t||void 0===t?void 0:t.profileImage):R,alt:"ProfileImage",style:{marginRight:"5px",objectFit:"cover"}}),!g&&(0,D.jsx)(p.Z,{style:{cursor:"default",width:"79px"},children:(0,D.jsxs)(x.Z,{className:"ff-Roboto fs-12 fw-medium ellipseStyle",style:{color:H.O.deactive,width:"99%"},children:[" ",(null===t||void 0===t?void 0:t.name)||"-"," "]})})]}),(0,D.jsx)(f.Z,{id:"resource-button",onClick:function(e){m(e.currentTarget)},"aria-controls":v?"resource-menu":void 0,"aria-haspopup":"true","aria-expanded":v?"true":void 0,style:{marginRight:"10px"},children:(0,D.jsx)(L.Z,{className:"svgColor"})}),(0,D.jsxs)(k.Z,{className:"appbar",id:"resource-menu",anchorEl:u,open:v,MenuListProps:{"aria-labelledby":"resource-button"},onClose:h,PopperProps:{placement:"bottom-end"},PaperProps:{style:{width:"217px",marginTop:"5px"}},children:[(0,D.jsxs)(I.Z,{className:"ff-Roboto fs-12 fs-medium",style:{color:H.O.blackMain,minHeight:"32px"},onClose:h,onClick:function(){n("/settings"),e((0,A.i3)(0)),m(null)},children:[" ","My Profile"," "]}),(0,D.jsxs)(I.Z,{className:"ff-Roboto fs-12 fs-medium",style:{color:H.O.blackMain,minHeight:"32px"},onClose:h,children:[" ","Support & Help"," "]}),(0,D.jsxs)(I.Z,{className:"ff-Roboto fs-12 fs-medium",style:{color:H.O.blackMain,minHeight:"32px"},onClose:h,onClick:Z,children:[" ","Logout"," "]})]})]})})})})]})})}var E=n(20083),U=n(2015),T=[{name:"Eco Initiatives",flag:!1,icon:h,route:"ecoInitiatives",moduleName:"eco_initiatives"},{name:"Analytics",flag:!1,icon:g,route:"analytics",moduleName:"reporting_analytics"},{name:"Payments",flag:!1,icon:y,route:"payments",moduleName:"payments"},{name:"User Management",flag:!1,icon:Z,route:"userManagement",moduleName:"user_management"},{name:"Integrations",flag:!1,icon:j,route:"integrations",moduleName:"integrations"},{name:"Settings",flag:!0,icon:b,route:"settings",moduleName:"settings"}];function _(){var e=(0,C.v9)((function(e){return e.auth})).user,t=(0,c.useState)(T),n=(0,o.Z)(t,2),h=n[0],g=n[1],Z=(0,l.s0)();(0,c.useEffect)((function(){var t=[].concat(T),n=null===e||void 0===e?void 0:e.permission;t.map((function(e){var t=null===n||void 0===n?void 0:n.find((function(t){return t.moduleName===e.moduleName}));t&&("0"===t.viewAccess&&"0"===t.editAccess&&"0"===t.deleteAccess&&"0"===t.activateAccess?e.moduleName===t.moduleName&&(e.flag=!1):e.flag=!0)})),g(t)}),[e]);var y=(0,C.I0)();(0,c.useEffect)((function(){var e=JSON.parse(JSON.stringify(h));y((0,S.sy)((0,s.Z)(e)))}),[h]);var b=(0,d.Z)("(max-width:1000px)"),j=(0,c.useRef)();(0,E.Z)(j,(function(){return b&&I(!1)}));var w=(0,c.useState)(!1),N=(0,o.Z)(w,2),k=N[0],I=N[1],M=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){var t,n,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.Z.get("/city");case 2:(t=e.sent).ok&&"success"===(n=t.data).status&&(a=null===n||void 0===n?void 0:n.data,y((0,A.Ix)(a)));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.Z.get("/country");case 2:(t=e.sent).ok&&"success"===(n=t.data).status&&y((0,A.sK)(null===n||void 0===n?void 0:n.data));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var t=(0,r.Z)((0,i.Z)().mark((function t(){var n,a,r,s;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={params:{enterpriseId:e.enterpriseId}},t.next=3,P.Z.get("/enterprise/".concat(e.enterpriseId,"/roles"),n);case 3:(a=t.sent).ok&&"success"===(r=a.data).status&&(s=null===r||void 0===r?void 0:r.data,y((0,A.Lk)(s)));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),R=function(){var t=(0,r.Z)((0,i.Z)().mark((function t(){var n,r,s,o,c;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y((0,A.K4)(!0)),n={params:{enterpriseId:e.enterpriseId,enterpriseUserId:e.enterpriseUserId}},r={},t.next=5,P.Z.get("/user/".concat(e.enterpriseId,"/").concat(e.enterpriseUserId),n);case 5:(s=t.sent).ok&&"success"===(o=s.data).status?(r=(0,a.Z)({},o.data),y((0,S.x4)((0,a.Z)((0,a.Z)({},e),r))),c=U.x8.find((function(e){var t;return(null===e||void 0===e?void 0:e.moduleName)===(null===(t=r)||void 0===t?void 0:t.moduleName)})),Z(c?"/".concat(c.name):"/ecoInitiatives"),y((0,A.K4)(!1))):y((0,A.K4)(!1));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,c.useEffect)((function(){M(),L(),O(),R()}),[]);return(0,D.jsx)("div",{className:"dashboardContainer",children:(0,D.jsxs)(p.Z,{direction:"row",children:[(0,D.jsx)("div",{ref:j,onClick:function(e){return e.stopPropagation()},className:k?"expandsideNav":"shrinksideNav",style:{background:H.O.primary,width:k?"256px":"56px",position:b?"fixed":"relative",top:"0",left:"0"},children:(0,D.jsxs)(p.Z,{children:[(0,D.jsx)("div",{className:"hamburgerwrapper",style:{width:"56px",height:"56px",background:H.O.primary},children:(0,D.jsx)(f.Z,{onClick:function(e){e.stopPropagation(),I(!k)},style:{width:"40px",height:"40px"},children:(0,D.jsx)(v.Z,{className:"svgIconsMenu"})})}),(0,D.jsx)(p.Z,{sx:{height:b?"calc(100vh - 56px)":"calc(100vh - 72px)",position:"relative",display:b&&!k?"none":"initial"},children:null===h||void 0===h?void 0:h.map((function(e,t){return e.flag?(0,D.jsxs)(u.OL,{onClick:function(){return b&&I(!1)},className:function(t){return(t.isActive?"activeMenu":"inActiveMenu")+" flex-aligncenter linkStyle "+("Settings"===e.name?"settingStyle":"")},style:{textDecoration:"none"},to:"/".concat(e.route),children:[(0,D.jsx)(m.Z,{disableInteractive:!0,componentsProps:{tooltip:{sx:{fontSize:"12px",fontFamily:"Roboto",fontWeight:"400",bgcolor:H.O.primaryDark,"& .MuiTooltip-arrow":{color:H.O.primaryDark,width:"0.5em !important",height:"0.8em !important",marginLeft:"-0.5em !important"}}}},title:!k&&e.name,placement:"right",arrow:!0,children:(0,D.jsx)("div",{className:"menuStyle",children:(0,D.jsx)("img",{src:e.icon,alt:e.name})})},t),k?(0,D.jsxs)(x.Z,{className:"menuName fs-12 fw-medium ff-Roboto expandedAnimation",children:[" ",e.name," "]}):""]},t):""}))})]})}),(0,D.jsxs)("div",{style:{flex:"1",width:"calc(100%  - 256px)"},children:[(0,D.jsx)(K,{}),(0,D.jsx)(l.j3,{})]})]})})}},98008:function(e,t,n){var a=n(64836);t.Z=void 0;var i=a(n(45649)),r=n(80184),s=(0,i.default)((0,r.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");t.Z=s}}]);
//# sourceMappingURL=650.b69974dd.chunk.js.map