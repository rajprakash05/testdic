"use strict";(self.webpackChunkdiz=self.webpackChunkdiz||[]).push([[27],{5027:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var a=n(1413),i=n(4165),s=n(5861),r=n(2982),o=n(885),c=n(2791),l=n(6871),u=n(3504),d=n(2797),f=n(4162),p=n(3811),m=n(5814),v=n(4565),x=n(8008);var h=n.p+"static/media/leaf.1ca0cee639847f480bdcdcced995f151.svg";var g=n.p+"static/media/poll.0ffe89679bc6882aff7446f008f65401.svg";var y=n.p+"static/media/account-multiple.f352b7e9caacce7a4bffc23bea6a6277.svg";var Z=n.p+"static/media/credit-card-outline.9784b32b79a02798b3f0e64cb418464c.svg";var b=n.p+"static/media/setting.59681de3134eb34fe3385254dcdbd372.svg";var j=n.p+"static/media/power-plug.c62f9b995584ac41c4350cc1397f9a34.svg";var w=n.p+"static/media/dizlogoOrigin.67111b7b45a26afa8fb0f0e682e7dcfc.svg",N=n(5452),k=n(4020),I=n(9434),C=n(3585),S=n(4175),R=n(8901),O=n(5172);var M=n.p+"static/media/profileDefault.66db2b79ab78aea739e44c1f6615f6fb.svg",P=n(1411),L=n(6747),z=n(184);function A(){var e=(0,I.I0)(),t=(0,I.v9)((function(e){return e.auth})).user,n=(0,l.s0)(),a=(0,c.useState)(!1),r=(0,o.Z)(a,2),u=r[0],m=r[1],x=Boolean(u),h=function(){m(null)},g=(0,d.Z)("(max-width:1000px)"),y=function(){var n=(0,s.Z)((0,i.Z)().mark((function n(){var a,s,r;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e((0,P.K4)(!0)),h(),a={params:{enterpriseUserId:t.enterpriseUserId}},n.next=5,S.R.post("/auth/logout",{},a);case 5:(s=n.sent).ok?(e((0,P.K4)(!1)),"success"===(r=s.data).status?(localStorage.removeItem("diz"),e((0,C.kS)())):(0,R.k)(r.message,2e3,"error")):e((0,P.K4)(!1));case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,z.jsx)("div",{className:"headerContainer",style:{background:L.O.header,marginLeft:g?"56px":"",height:"56px"},children:(0,z.jsxs)(f.Z,{sx:{height:"100%"},direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,z.jsxs)("div",{className:"flex-center",children:[(0,z.jsx)("img",{style:{width:"36.76px",height:"19.06px",marginLeft:g?"16px":"24px"},src:w,alt:"Do It Zero Logo"}),(0,z.jsxs)(v.Z,{className:"fs-10 ff-Roboto fw-regular",style:{marginLeft:"11.24px",display:"flex",flexDirection:"column",lineHeight:"10px"},children:[(0,z.jsx)("span",{children:"Enterprise"}),(0,z.jsx)("span",{children:"Platform"})," "]})]}),(0,z.jsx)("div",{className:"profileSection",style:{minWidth:g?"100px":"232px"},children:(0,z.jsx)(f.Z,{sx:{height:"100%"},direction:"row",alignItems:"center",children:(0,z.jsx)("div",{className:"profiledetail flex-aligncenter",style:{flex:"1",width:"calc(100% - 56px)"},children:(0,z.jsxs)(f.Z,{direction:"row",flex:"1",justifyContent:"space-between",style:{width:"100%"},children:[(0,z.jsxs)("div",{className:"flex-aligncenter",style:{width:"calc(100% - 50px)"},children:[(0,z.jsx)("img",{src:M,alt:"ProfileImage",style:{marginLeft:"8px"}}),!g&&(0,z.jsxs)(f.Z,{style:{cursor:"default",width:"119px"},children:[(0,z.jsxs)(v.Z,{className:"ff-Roboto fs-12 fw-medium ellipseStyle",style:{color:L.O.deactive,width:"99%"},children:[" ",(null===t||void 0===t?void 0:t.name)||"-"," "]}),(0,z.jsxs)(v.Z,{className:"ff-Roboto fw-regular fs-12 ellipseStyle",style:{color:L.O.deactive,width:"99%"},children:[" ",null===t||void 0===t?void 0:t.emailId," "]})]})]}),(0,z.jsx)(p.Z,{id:"resource-button",onClick:function(e){m(e.currentTarget)},"aria-controls":x?"resource-menu":void 0,"aria-haspopup":"true","aria-expanded":x?"true":void 0,style:{marginRight:"10px"},children:(0,z.jsx)(O.Z,{className:"svgColor"})}),(0,z.jsxs)(N.Z,{className:"appbar",id:"resource-menu",anchorEl:u,open:x,MenuListProps:{"aria-labelledby":"resource-button"},onClose:h,PopperProps:{placement:"bottom-end"},PaperProps:{style:{width:"217px",marginTop:"5px"}},children:[(0,z.jsx)(k.Z,{className:"ff-Roboto fs-12 fs-medium",style:{color:L.O.blackMain,minHeight:"32px"},onClose:h,onClick:function(){n("/settings"),e((0,P.i3)(0)),m(null)},children:" My Profile "}),(0,z.jsx)(k.Z,{className:"ff-Roboto fs-12 fs-medium",style:{color:L.O.blackMain,minHeight:"32px"},onClose:h,children:" Support & Help "}),(0,z.jsx)(k.Z,{className:"ff-Roboto fs-12 fs-medium",style:{color:L.O.blackMain,minHeight:"32px"},onClose:h,onClick:y,children:" Logout "})]})]})})})})]})})}var H=n(83),K=n(2015),D=[{name:"Eco Initiatives",flag:!1,icon:h,route:"ecoInitiatives",moduleName:"eco_initiatives"},{name:"Analytics",flag:!1,icon:g,route:"analytics",moduleName:"reporting_analytics"},{name:"Payments",flag:!1,icon:Z,route:"payments",moduleName:"payments"},{name:"User Management",flag:!1,icon:y,route:"userManagement",moduleName:"user_management"},{name:"Integrations",flag:!1,icon:j,route:"integrations",moduleName:"integrations"},{name:"Settings",flag:!0,icon:b,route:"settings",moduleName:"settings"}];function E(){var e=(0,I.v9)((function(e){return e.auth})).user,t=(0,c.useState)(D),n=(0,o.Z)(t,2),h=n[0],g=n[1],y=(0,l.s0)();(0,c.useEffect)((function(){var t=[].concat(D),n=null===e||void 0===e?void 0:e.permission;t.map((function(e){var t=null===n||void 0===n?void 0:n.find((function(t){return t.moduleName===e.moduleName}));t&&("0"===t.viewAccess&&"0"===t.editAccess&&"0"===t.deleteAccess&&"0"===t.activateAccess?e.moduleName===t.moduleName&&(e.flag=!1):e.flag=!0)})),g(t)}),[e]);var Z=(0,I.I0)();(0,c.useEffect)((function(){var e=JSON.parse(JSON.stringify(h));Z((0,C.sy)((0,r.Z)(e)))}),[h]);var b=(0,d.Z)("(max-width:1000px)"),j=(0,c.useRef)();(0,H.Z)(j,(function(){return b&&R(!1)}));var w=(0,c.useState)(!1),N=(0,o.Z)(w,2),k=N[0],R=N[1],O=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var t,n,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.R.get("/city");case 2:(t=e.sent).ok&&"success"===(n=t.data).status&&(a=null===n||void 0===n?void 0:n.data,Z((0,P.Ix)(a)));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.R.get("/country");case 2:(t=e.sent).ok&&"success"===(n=t.data).status&&Z((0,P.sK)(null===n||void 0===n?void 0:n.data));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var t=(0,s.Z)((0,i.Z)().mark((function t(){var n,a,s,r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={params:{enterpriseId:e.enterpriseId}},t.next=3,S.R.get("/enterprise/".concat(e.enterpriseId,"/roles"),n);case 3:(a=t.sent).ok&&"success"===(s=a.data).status&&(r=null===s||void 0===s?void 0:s.data,Z((0,P.Lk)(r)));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),U=function(){var t=(0,s.Z)((0,i.Z)().mark((function t(){var n,s,r,o,c;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Z((0,P.K4)(!0)),n={params:{enterpriseId:e.enterpriseId,enterpriseUserId:e.enterpriseUserId}},s={},t.next=5,S.R.get("/user/".concat(e.enterpriseId,"/").concat(e.enterpriseUserId),n);case 5:(r=t.sent).ok&&"success"===(o=r.data).status?(s=(0,a.Z)({},o.data),Z((0,C.x4)((0,a.Z)((0,a.Z)({},e),s))),c=K.x8.find((function(e){var t;return(null===e||void 0===e?void 0:e.moduleName)===(null===(t=s)||void 0===t?void 0:t.moduleName)})),y(c?"/".concat(c.name):"/ecoInitiatives"),Z((0,P.K4)(!1))):Z((0,P.K4)(!1));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,c.useEffect)((function(){O(),M(),E(),U()}),[]);return(0,z.jsx)("div",{className:"dashboardContainer",children:(0,z.jsxs)(f.Z,{direction:"row",children:[(0,z.jsx)("div",{ref:j,onClick:function(e){return e.stopPropagation()},className:k?"expandsideNav":"shrinksideNav",style:{background:L.O.primary,width:k?"256px":"56px",position:b?"fixed":"relative",top:"0",left:"0"},children:(0,z.jsxs)(f.Z,{children:[(0,z.jsx)("div",{className:"hamburgerwrapper",style:{width:"56px",height:"56px",background:L.O.primary},children:(0,z.jsx)(p.Z,{onClick:function(e){e.stopPropagation(),R(!k)},style:{width:"40px",height:"40px"},children:(0,z.jsx)(x.Z,{className:"svgIconsMenu"})})}),(0,z.jsx)(f.Z,{sx:{height:b?"calc(100vh - 56px)":"calc(100vh - 72px)",position:"relative",display:b&&!k?"none":"initial"},children:null===h||void 0===h?void 0:h.map((function(e,t){return e.flag?(0,z.jsxs)(u.OL,{onClick:function(){return b&&R(!1)},className:function(t){return(t.isActive?"activeMenu":"inActiveMenu")+" flex-aligncenter linkStyle "+("Settings"===e.name?"settingStyle":"")},style:{textDecoration:"none"},to:"/".concat(e.route),children:[(0,z.jsx)(m.Z,{disableInteractive:!0,componentsProps:{tooltip:{sx:{fontSize:"12px",fontFamily:"Roboto",fontWeight:"400",bgcolor:L.O.primaryDark,"& .MuiTooltip-arrow":{color:L.O.primaryDark,width:"0.5em !important",height:"0.8em !important",marginLeft:"-0.5em !important"}}}},title:!k&&e.name,placement:"right",arrow:!0,children:(0,z.jsx)("div",{className:"menuStyle",children:(0,z.jsx)("img",{src:e.icon,alt:e.name})})},t),k?(0,z.jsxs)(v.Z,{className:"menuName fs-12 fw-medium ff-Roboto expandedAnimation",children:[" ",e.name," "]}):""]},t):""}))})]})}),(0,z.jsxs)("div",{style:{flex:"1",width:"calc(100%  - 256px)"},children:[(0,z.jsx)(A,{}),(0,z.jsx)(l.j3,{})]})]})})}},8008:function(e,t,n){var a=n(4836);t.Z=void 0;var i=a(n(5649)),s=n(184),r=(0,i.default)((0,s.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");t.Z=r}}]);
//# sourceMappingURL=27.07380a02.chunk.js.map